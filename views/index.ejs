<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--  -->
        <meta http-equiv="Refresh" content="30">

        <title>Welcome</title>
        <script src="/reload/reload.js"></script>
        <link rel="stylesheet" type="text/css" href="./stylesheets/index.css" media="screen" />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>

    <body>

        <h1>Call Center</h1>
        <hr>
        <i class='fas fa-phone-volume' style='font-size:60px;color:#04AA6D;'></i>
        <i class="material-icons" style="font-size:60px;color:#04AA6D;
                  position: relative; left: 400px;">computer</i>
        <i class="fas fa-cloud" style="font-size:60px;color:#04AA6D;
                  position: relative; left: 800px;"></i>
        <hr>

        <!-- table of phone calls  -->
        <table id="tbUser">
          <thead>
            <tr>
              <th>Start Time</th>
              <th>City</th>
              <th>Gender</th>
              <th>Age</th>
              <th>Prev Calls</th>
              <th>Product</th>
              <!--<th>Topic</th>-->
            </tr>
          </thead>  

          <tbody>

            
            <!-- fill the table from database  -->
            <% if (locals.calls_) { %>
              <% var x = 1 %>
                 <% calls_.forEach(function(obj) { %>
                 <tr>
                    
                    <!--
                    <td><%= obj.StartTime %></td>
                    <td><%= obj.City %></td>
                    <td><%= obj.Gender %></td>
                    <td><%= obj.Age %></td>
                    <td><%= obj.PrevCalls %></td>
                    <td><%= obj.Product %></td>
                    <td><%= obj.Topic %></td>
                    -->


                    <td><%= obj.time %></td>
                    <td><%= obj.city %></td>
                    <td><%= obj.gender %></td>
                    <td><%= obj.age %></td>
                    <td><%= obj.prev %></td>
                    <td><%= obj.product %></td>
                    <!--<td><%= obj.topic %></td>-->

                    <!-- add button in the first row  -->
                    <%if (x == 1){ %>
                      <td><button class="btnDelete">Answer <i class='fas fa-phone-volume'></i></button></td>
                    <% } %>
                    
              <% x++;}); %>
              <% } %>

 
          </tbody>           

        </table>

        <!-- remove row on button click  -->
        <script>
          $(document).ready(function(){
            $("#tbUser").on('click','.btnDelete',function(){
                  //$(this).closest('tr').remove();
                  $(this).closest('tr').toggleClass("active");
                  $(".btnDelete").html("Call Accepted");
                  
                });
            });
        </script>

    </body>
</html>